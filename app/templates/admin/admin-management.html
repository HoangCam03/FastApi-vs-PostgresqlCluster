
<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Qu·∫£n l√Ω b√†i vi·∫øt BLACKPINK</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', path='css/post_detail.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      background: linear-gradient(to right, #f8d7e2, #fce4ec);
      font-family: 'Segoe UI', sans-serif;
      color: #333;
    }

    .pink-header {
      background-color: #ff69b4;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(255, 105, 180, 0.3);
    }

    .btn-blackpink {
      background-color: #ff69b4;
      color: white;
      border: none;
      transition: background-color 0.3s ease;
    }

    .btn-blackpink:hover {
      background-color: #ff1493;
      color: white;
    }

    .row-cols-md-3 .col {
      display: flex;
    }


    .card {
      flex: 1;
      /* gi√£n ƒë·ªÅu theo chi·ªÅu d·ªçc */
      display: flex;
      flex-direction: column;
      /* n·∫øu mu·ªën c·ªë ƒë·ªãnh cao t·ªëi thi·ªÉu, gi·ªØ min-height */
      min-height: 450px;
    }

    /* .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    } */

    .card-img-top {
      flex: 0 0 220px;
      /* c·ªë ƒë·ªãnh 220px */
      width: 100%;
      object-fit: cover;
    }

    /* N·ªôi dung card chi·∫øm ph·∫ßn c√≤n l·∫°i */
    .card-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: bold;
      color: #d63384;
      margin-bottom: 0.5rem;
    }

    .card-text {
      font-size: 0.95rem;
      color: #555;
      margin-top: 0.25rem;
      flex: 1;
    }

    .card-body .d-flex {
      margin-top: auto;
    }

    .badge.bg-info {
      background-color: #ff85a2 !important;
      color: #fff;
      font-size: 0.75rem;
      padding: 0.4em 0.6em;
      border-radius: 8px;
    }

    .modal-content {
      border-radius: 15px;
    }

    .modal-header,
    .modal-footer {
      background-color: #ffe4ec;
    }

    label.form-label {
      font-weight: 600;
      color: #cc3366;
    }

    textarea.form-control,
    input.form-control,
    select.form-select {
      border-radius: 8px;
    }

    ul#nav {
      padding-left: 0;
      list-style-type: none;
      font-size: 1rem;
    }

    ul#nav li {
      color: #ff69b4;
    }
  </style>

</head>

<body>

  <div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center pink-header mb-3">
      <h2>üå∏ Qu·∫£n l√Ω b√†i vi·∫øt BLACKPINK</h2>
      <button class="btn btn-blackpink" data-bs-toggle="modal" data-bs-target="#addPostModal">‚ûï Th√™m b√†i vi·∫øt</button>
      <a href="{{ url_for('jisoo') }}" class="back-btn">
        <i class="fas fa-arrow-left"></i> Quay l·∫°i
      </a>
    </div>

    <!-- Danh s√°ch b√†i vi·∫øt -->
    <div class="row row-cols-1 row-cols-md-3 g-4">
      {% if posts %}
        {% for post in posts %}
      <div class="col">
        <div class="card shadow-sm">
          <img src="{{ url_for('static', path='uploads/' + post.images) }}" class="card-img-top" alt="{{ post.title }}">
          <div class="card-body">
            <h5 class="card-title">{{ post.title }}</h5>
            {% if post.member == "jisoo" %}Jisoo{% elif post.member == "jennie" %}Jennie{% elif post.member == "rose"%}Ros√©{% elif post.member == "lisa" %}Lisa{% endif %}
            <p class="card-text">{{ post.excerpt }}</p>
            <span class="badge bg-info">{{ post.category }}</span>


            <!-- N√∫t s·ª≠a v√† xo√° -->
            <div class="mt-3 d-flex justify-content-between">
              <button class="btn btn-sm btn-warning" data-bs-toggle="modal"
                data-bs-target="#editPostModal{{ post.id }}">
                ‚úèÔ∏è S·ª≠a
              </button>
              <form method="POST"  action="{{ url_for('delete_post', post_id=post.id) }}"
                onsubmit="return confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën xo√° b√†i vi·∫øt n√†y?');">
                <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è Xo√°</button>
              </form>
            </div>
          </div>
          <!-- Modal S·ª≠a b√†i vi·∫øt -->
          <div class="modal fade" id="editPostModal{{ post.id }}" tabindex="-1"
            aria-labelledby="editPostModalLabel{{ post.id }}" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <form method="POST" enctype="multipart/form-data" action="{{ url_for('edit_post', post_id=post.id) }}">
                  <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel{{ post.id }}">Ch·ªânh s·ª≠a b√†i vi·∫øt</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    <div class="mb-3">
                      <input type="hidden" name="author" value="{{ post.author }}">
                      <ul id="nav">
                        <li><span style="color: #ff9aa2;">TEST, {{ post.author }}</span></li>
                        <p>B√†i vi·∫øt ID: {{ post.id }}</p>
                    </ul>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Ti√™u ƒë·ªÅ</label>
                      <input type="text" name="title" class="form-control" value="{{ post.title }}" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Th√†nh vi√™n</label>
                      <select name="member" class="form-select" required>
                        <option value="jisoo" {% if post.member == "jisoo" %}selected{% endif %}>Jisoo</option>
                        <option value="jennie" {% if post.member == "jennie" %}selected{% endif %}>Jennie</option>
                        <option value="rose" {% if post.member == "rose" %}selected{% endif %}>Ros√©</option>
                        <option value="lisa" {% if post.member == "lisa" %}selected{% endif %}>Lisa</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Danh m·ª•c</label>
                      <select name="category" class="form-select" required>
                        <option value="fashion" {% if post.category == "fashion" %}selected{% endif %}>Th·ªùi trang</option>
                        <option value="music" {% if post.category == "music" %}selected{% endif %}>√Çm nh·∫°c</option>
                        <option value="event" {% if post.category == "event" %}selected{% endif %}>S·ª± ki·ªán</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">M√¥ t·∫£ ng·∫Øn</label>
                      <textarea name="excerpt" class="form-control" maxlength="50"
                        required>{{ post.excerpt }}</textarea>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">N·ªôi dung</label>
                      <textarea name="content" class="form-control" rows="5" required>{{ post.content }}</textarea>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Thay h√¨nh ·∫£nh (n·∫øu c·∫ßn)</label>
                      <input type="file" name="images" class="form-control">
                      {% if post.images %}
                        <small class="text-muted">H√¨nh hi·ªán t·∫°i: {{ post.images }}</small>
                        <br>
                        <img src="{{ url_for('static', path='uploads/' + post.images) }}" 
                             alt="Current image" 
                             style="max-width: 200px; max-height: 150px; margin-top: 10px; border-radius: 5px;">
                      {% else %}
                        <small class="text-muted">Ch∆∞a c√≥ h√¨nh ·∫£nh</small>
                      {% endif %}
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hu·ª∑</button>
                    <button type="submit" class="btn btn-blackpink">L∆∞u thay ƒë·ªïi</button>
                  </div>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
        {% endfor %}
      {% else %}
        <p class="text-center">Ch∆∞a c√≥ b√†i vi·∫øt n√†o.</p>
      {% endif %}
    </div>
  </div>

  <!-- Modal Th√™m b√†i vi·∫øt -->
  <div class="modal fade" id="addPostModal" tabindex="-1" aria-labelledby="addPostModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <form method="POST" enctype="multipart/form-data" action="{{ url_for('add_post') }}">
          <div class="modal-header">
            <h5 class="modal-title" id="addPostModalLabel">Th√™m b√†i vi·∫øt m·ªõi</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <ul id="nav">
                <li><span style="color: #ff9aa2;">TEST, {{ username }}</span></li>
                <input type="hidden" name="author" value="{{ username }}">
              </ul>
            </div>
            <div class="mb-3">
              <label class="form-label">Ti√™u ƒë·ªÅ</label>
              <input type="text" name="title" class="form-control" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Th√†nh vi√™n</label>
              <select name="member" class="form-select" required>
                <option value="">-- Ch·ªçn --</option>
                <option value="jisoo">Jisoo</option>
                <option value="jennie">Jennie</option>
                <option value="rose">Ros√©</option>
                <option value="lisa">Lisa</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Danh m·ª•c</label>
              <select name="category" class="form-select" required>
                <option value="">-- Ch·ªçn --</option>
                <option value="fashion">Th·ªùi trang</option>
                <option value="music">√Çm nh·∫°c</option>
                <option value="event">S·ª± ki·ªán</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">M√¥ t·∫£ ng·∫Øn</label>
              <textarea name="excerpt" class="form-control" maxlength="50" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">N·ªôi dung</label>
              <textarea name="content" class="form-control" rows="5" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">H√¨nh ·∫£nh</label>
              <input type="file" name="images" class="form-control" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hu·ª∑</button>
            <button type="submit" class="btn btn-blackpink">L∆∞u b√†i vi·∫øt</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>