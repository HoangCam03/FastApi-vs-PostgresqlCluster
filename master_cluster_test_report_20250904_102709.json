{
  "test_summary": {
    "start_time": "2025-09-04T10:25:40.809566",
    "end_time": "2025-09-04T10:27:09.752477",
    "total_duration": 88.942911,
    "total_test_suites": 7,
    "passed_tests": 5,
    "failed_tests": 2,
    "timeout_tests": 0,
    "crash_tests": 0,
    "success_rate": 71.42857142857143
  },
  "test_suites": [
    {
      "name": "Simple Cluster Test",
      "file": "simple_cluster_test.py",
      "description": "Test c∆° b·∫£n CRUD, replica read-only, primary failover"
    },
    {
      "name": "Primary Replica Flow Test",
      "file": "test_primary_replica_flow.py",
      "description": "Test flow gi·ªØa primary v√† replica"
    },
    {
      "name": "Cluster Scenarios Test",
      "file": "cluster_scenarios_test.py",
      "description": "Test c√°c scenarios ph·ª©c t·∫°p"
    },
    {
      "name": "CRUD Operations Test",
      "file": "test_crud_operations.py",
      "description": "Test CRUD operations qua API"
    },
    {
      "name": "Comprehensive Cluster Test",
      "file": "comprehensive_cluster_test.py",
      "description": "Test to√†n di·ªán v·ªõi 6 scenarios ch√≠nh"
    },
    {
      "name": "Advanced Cluster Test",
      "file": "advanced_cluster_test.py",
      "description": "Test n√¢ng cao v·ªõi connection pooling, replication lag, etc."
    },
    {
      "name": "Network Performance Test",
      "file": "network_performance_test.py",
      "description": "Test network scenarios v√† performance"
    }
  ],
  "detailed_results": [
    {
      "suite_name": "Simple Cluster Test",
      "file": "simple_cluster_test.py",
      "status": "PASS",
      "duration": 18.636211156845093,
      "return_code": 0,
      "stdout": "[10:25:41] ‚ÑπÔ∏è üöÄ Starting Simple PostgreSQL Cluster Test\n[10:25:41] ‚ÑπÔ∏è ==================================================\n[10:25:42] ‚úÖ Test table created and cleaned\n[10:25:42] ‚ÑπÔ∏è \nüîÑ Running: Basic CRUD Operations\n[10:25:42] ‚ÑπÔ∏è ------------------------------\n[10:25:42] ‚ÑπÔ∏è === TEST: BASIC CRUD OPERATIONS ===\n[10:25:42] ‚úÖ Created record 1 on primary\n[10:25:42] ‚úÖ Record replicated to replica\n[10:25:42] ‚úÖ Updated record on primary\n[10:25:42] ‚úÖ Update replicated to replica\n[10:25:42] ‚úÖ Deleted record on primary\n[10:25:42] ‚úÖ Delete replicated to replica\n[10:25:43] ‚ÑπÔ∏è \nüîÑ Running: Replica Read-Only\n[10:25:43] ‚ÑπÔ∏è ------------------------------\n[10:25:43] ‚ÑπÔ∏è === TEST: REPLICA READ-ONLY ===\n[10:25:43] ‚úÖ Replica correctly blocked INSERT: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n[10:25:44] ‚ÑπÔ∏è \nüîÑ Running: Primary Failover\n[10:25:44] ‚ÑπÔ∏è ------------------------------\n[10:25:44] ‚ÑπÔ∏è === TEST: PRIMARY FAILOVER ===\n[10:25:44] ‚úÖ Created record 2 before failover\n[10:25:44] ‚úÖ Data synced before failover\n[10:25:44] ‚ÑπÔ∏è Stopping primary container...\n[10:25:47] ‚úÖ Primary container stopped\n[10:25:47] ‚úÖ Replica still readable during primary down: 1 rows\n[10:25:47] ‚ÑπÔ∏è Starting primary container...\n[10:25:58] ‚úÖ Primary container started\n[10:25:58] ‚úÖ Replication resumed after failover: record 3\n[10:25:59] ‚ÑπÔ∏è \n==================================================\n[10:25:59] ‚ÑπÔ∏è üìä TEST SUMMARY\n[10:25:59] ‚ÑπÔ∏è ==================================================\n[10:25:59] ‚ÑπÔ∏è ‚úÖ PASS - Basic CRUD Operations\n[10:25:59] ‚ÑπÔ∏è ‚úÖ PASS - Replica Read-Only\n[10:25:59] ‚ÑπÔ∏è ‚úÖ PASS - Primary Failover\n[10:25:59] ‚ÑπÔ∏è \nTotal: 3 | Passed: 3 | Failed: 0\n[10:25:59] ‚úÖ Success Rate: 100.0%\n\nüéâ All tests passed!\n",
      "stderr": "D:\\fastapi_project\\simple_cluster_test.py:41: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\simple_cluster_test.py:42: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\simple_cluster_test.py:100: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\simple_cluster_test.py:101: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Primary Replica Flow Test",
      "file": "test_primary_replica_flow.py",
      "status": "PASS",
      "duration": 0.9915030002593994,
      "return_code": 0,
      "stdout": "== Primary/Replica flow test ==\nCreated/ensured table on primary\nInserted row id=1 on primary\nReplicated to replica: True\nUpdated row on primary\nUpdate replicated to replica: True\nDeleted row on primary\nDelete replicated to replica: True\nReplica write blocked as expected: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n== Flow test completed successfully ==\n",
      "stderr": "D:\\fastapi_project\\test_primary_replica_flow.py:36: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:38: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\test_primary_replica_flow.py:59: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:61: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\test_primary_replica_flow.py:81: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:83: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Cluster Scenarios Test",
      "file": "cluster_scenarios_test.py",
      "status": "PASS",
      "duration": 0.9756426811218262,
      "return_code": 0,
      "stdout": "[10:26:11] == Scenario: CRUD + Replication ==\n[10:26:11] Inserted id=1 on primary\n[10:26:11] Replica saw CREATE\n[10:26:11] Replica saw UPDATE\n[10:26:11] Replica saw DELETE\n[10:26:11] Replica write blocked as expected: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n[10:26:11] == Scenario: Failover (primary down) ==\n[10:26:11] Replica synced before failover\n[10:26:11] Note: Docker control test skipped (requires host access)\n[10:26:11] Manual test: docker stop postgres-primary, verify replica read-only, docker start postgres-primary\n[10:26:11] Replication resumed\n[10:26:11] == All scenarios passed ==\n",
      "stderr": "D:\\fastapi_project\\cluster_scenarios_test.py:64: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\cluster_scenarios_test.py:65: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\cluster_scenarios_test.py:76: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\cluster_scenarios_test.py:77: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "CRUD Operations Test",
      "file": "test_crud_operations.py",
      "status": "PASS",
      "duration": 0.4483642578125,
      "return_code": 0,
      "stdout": "[2025-09-04 10:26:16] [INFO] üöÄ Starting PostgreSQL Cluster CRUD Tests\n[2025-09-04 10:26:16] [ERROR] ‚ùå Login error: ('Connection aborted.', ConnectionAbortedError(10053, 'An established connection was aborted by the software in your host machine', None, 10053, None))\n",
      "stderr": ""
    },
    {
      "suite_name": "Comprehensive Cluster Test",
      "file": "comprehensive_cluster_test.py",
      "status": "PASS",
      "duration": 36.4734148979187,
      "return_code": 0,
      "stdout": "üöÄ B·∫Øt ƒë·∫ßu Comprehensive PostgreSQL Cluster Testing\n============================================================\n‚úÖ [SETUP] PASS: Test environment setup completed\n\nÔøΩÔøΩ Running: Basic Replication\n----------------------------------------\n‚úÖ [CREATE_REPLICATION] PASS: Row 1 replicated in 0.02s\n‚úÖ [UPDATE_REPLICATION] PASS: Update replicated in 0.01s\n‚úÖ [DELETE_REPLICATION] PASS: Delete replicated in 0.01s\n\nÔøΩÔøΩ Running: Replica Read-Only\n----------------------------------------\n‚úÖ [REPLICA_INSERT_BLOCK] PASS: Replica correctly blocked INSERT: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n‚úÖ [REPLICA_UPDATE_BLOCK] PASS: Replica correctly blocked UPDATE: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute UPDATE in a read-only transaction\n‚úÖ [REPLICA_DELETE_BLOCK] PASS: Replica correctly blocked DELETE: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute DELETE in a read-only transaction\n\nÔøΩÔøΩ Running: Primary Failover\n----------------------------------------\n‚úÖ [PRE_FAILOVER_SYNC] PASS: Data synced before failover: row 2\n‚úÖ [PRIMARY_STOP] PASS: Primary container stopped successfully\n‚úÖ [REPLICA_READ_DURING_FAILOVER] PASS: Replica still readable: 1 rows\n‚úÖ [POST_FAILOVER_SYNC] PASS: Replication resumed: row 3\n\nÔøΩÔøΩ Running: High Load Replication\n----------------------------------------\n‚úÖ [BATCH_INSERT] PASS: Inserted 100 records in 0.06s\n‚úÖ [BATCH_REPLICATION] PASS: All 100 records replicated in 0.18s\n\nÔøΩÔøΩ Running: Network Partition\n----------------------------------------\n‚ùå [NETWORK_PARTITION] FAIL: Network partition simulation failed: 404 Client Error for http+docker://localnpipe/v1.48/containers/postgres-replica/json: Not Found (\"No such container: postgres-replica\")\n\nÔøΩÔøΩ Running: Data Consistency\n----------------------------------------\n‚úÖ [DATA_CONSISTENCY] PASS: Data consistent: 10 records match\nÔøΩÔøΩ B√°o c√°o ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o: cluster_test_report.json\n\n============================================================\nüìä TEST SUMMARY\n============================================================\nTotal Tests: 15\nPassed: 14 ‚úÖ\nFailed: 1 ‚ùå\nSuccess Rate: 93.3%\nStart Time: 2025-09-04T10:26:22.604732\nEnd Time: 2025-09-04T10:26:58.239860\n\n‚ö†Ô∏è Some tests failed. Check the report for details.\n",
      "stderr": "D:\\fastapi_project\\comprehensive_cluster_test.py:438: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:439: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\comprehensive_cluster_test.py:472: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:473: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\comprehensive_cluster_test.py:455: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:456: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Advanced Cluster Test",
      "file": "advanced_cluster_test.py",
      "status": "FAIL",
      "duration": 0.4451420307159424,
      "return_code": 1,
      "stdout": "",
      "stderr": "Traceback (most recent call last):\n  File \"D:\\fastapi_project\\advanced_cluster_test.py\", line 13, in <module>\n    import psutil\nModuleNotFoundError: No module named 'psutil'\n"
    },
    {
      "suite_name": "Network Performance Test",
      "file": "network_performance_test.py",
      "status": "FAIL",
      "duration": 0.9507944583892822,
      "return_code": 1,
      "stdout": "",
      "stderr": "Traceback (most recent call last):\n  File \"D:\\fastapi_project\\network_performance_test.py\", line 18, in <module>\n    import psutil\nModuleNotFoundError: No module named 'psutil'\n"
    }
  ]
}