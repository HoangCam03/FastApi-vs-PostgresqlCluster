{
  "test_summary": {
    "start_time": "2025-09-04T10:39:47.209802",
    "end_time": "2025-09-04T10:43:21.170665",
    "total_duration": 213.960863,
    "total_test_suites": 7,
    "passed_tests": 7,
    "failed_tests": 0,
    "timeout_tests": 0,
    "crash_tests": 0,
    "success_rate": 100.0
  },
  "test_suites": [
    {
      "name": "Simple Cluster Test",
      "file": "simple_cluster_test.py",
      "description": "Test c∆° b·∫£n CRUD, replica read-only, primary failover"
    },
    {
      "name": "Primary Replica Flow Test",
      "file": "test_primary_replica_flow.py",
      "description": "Test flow gi·ªØa primary v√† replica"
    },
    {
      "name": "Cluster Scenarios Test",
      "file": "cluster_scenarios_test.py",
      "description": "Test c√°c scenarios ph·ª©c t·∫°p"
    },
    {
      "name": "CRUD Operations Test",
      "file": "test_crud_operations.py",
      "description": "Test CRUD operations qua API"
    },
    {
      "name": "Comprehensive Cluster Test",
      "file": "comprehensive_cluster_test.py",
      "description": "Test to√†n di·ªán v·ªõi 6 scenarios ch√≠nh"
    },
    {
      "name": "Advanced Cluster Test",
      "file": "advanced_cluster_test.py",
      "description": "Test n√¢ng cao v·ªõi connection pooling, replication lag, etc."
    },
    {
      "name": "Network Performance Test",
      "file": "network_performance_test.py",
      "description": "Test network scenarios v√† performance"
    }
  ],
  "detailed_results": [
    {
      "suite_name": "Simple Cluster Test",
      "file": "simple_cluster_test.py",
      "status": "PASS",
      "duration": 18.866234064102173,
      "return_code": 0,
      "stdout": "[10:39:48] ‚ÑπÔ∏è üöÄ Starting Simple PostgreSQL Cluster Test\n[10:39:48] ‚ÑπÔ∏è ==================================================\n[10:39:48] ‚úÖ Test table created and cleaned\n[10:39:48] ‚ÑπÔ∏è \nüîÑ Running: Basic CRUD Operations\n[10:39:48] ‚ÑπÔ∏è ------------------------------\n[10:39:48] ‚ÑπÔ∏è === TEST: BASIC CRUD OPERATIONS ===\n[10:39:48] ‚úÖ Created record 1 on primary\n[10:39:48] ‚úÖ Record replicated to replica\n[10:39:48] ‚úÖ Updated record on primary\n[10:39:48] ‚úÖ Update replicated to replica\n[10:39:48] ‚úÖ Deleted record on primary\n[10:39:48] ‚úÖ Delete replicated to replica\n[10:39:49] ‚ÑπÔ∏è \nüîÑ Running: Replica Read-Only\n[10:39:49] ‚ÑπÔ∏è ------------------------------\n[10:39:49] ‚ÑπÔ∏è === TEST: REPLICA READ-ONLY ===\n[10:39:49] ‚úÖ Replica correctly blocked INSERT: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n[10:39:50] ‚ÑπÔ∏è \nüîÑ Running: Primary Failover\n[10:39:50] ‚ÑπÔ∏è ------------------------------\n[10:39:50] ‚ÑπÔ∏è === TEST: PRIMARY FAILOVER ===\n[10:39:50] ‚úÖ Created record 2 before failover\n[10:39:50] ‚úÖ Data synced before failover\n[10:39:50] ‚ÑπÔ∏è Stopping primary container...\n[10:39:53] ‚úÖ Primary container stopped\n[10:39:53] ‚úÖ Replica still readable during primary down: 1 rows\n[10:39:53] ‚ÑπÔ∏è Starting primary container...\n[10:40:04] ‚úÖ Primary container started\n[10:40:04] ‚úÖ Replication resumed after failover: record 3\n[10:40:05] ‚ÑπÔ∏è \n==================================================\n[10:40:05] ‚ÑπÔ∏è üìä TEST SUMMARY\n[10:40:05] ‚ÑπÔ∏è ==================================================\n[10:40:05] ‚ÑπÔ∏è ‚úÖ PASS - Basic CRUD Operations\n[10:40:05] ‚ÑπÔ∏è ‚úÖ PASS - Replica Read-Only\n[10:40:05] ‚ÑπÔ∏è ‚úÖ PASS - Primary Failover\n[10:40:05] ‚ÑπÔ∏è \nTotal: 3 | Passed: 3 | Failed: 0\n[10:40:05] ‚úÖ Success Rate: 100.0%\n\nüéâ All tests passed!\n",
      "stderr": "D:\\fastapi_project\\simple_cluster_test.py:41: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\simple_cluster_test.py:42: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\simple_cluster_test.py:100: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\simple_cluster_test.py:101: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Primary Replica Flow Test",
      "file": "test_primary_replica_flow.py",
      "status": "PASS",
      "duration": 1.254460096359253,
      "return_code": 0,
      "stdout": "== Primary/Replica flow test ==\nCreated/ensured table on primary\nInserted row id=1 on primary\nReplicated to replica: True\nUpdated row on primary\nUpdate replicated to replica: True\nDeleted row on primary\nDelete replicated to replica: True\nReplica write blocked as expected: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n== Flow test completed successfully ==\n",
      "stderr": "D:\\fastapi_project\\test_primary_replica_flow.py:36: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:38: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\test_primary_replica_flow.py:59: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:61: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\test_primary_replica_flow.py:81: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=20)\nD:\\fastapi_project\\test_primary_replica_flow.py:83: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Cluster Scenarios Test",
      "file": "cluster_scenarios_test.py",
      "status": "PASS",
      "duration": 3.572371244430542,
      "return_code": 0,
      "stdout": "[10:40:19] == Scenario: CRUD + Replication ==\n[10:40:19] Inserted id=1 on primary\n[10:40:19] Replica saw CREATE\n[10:40:19] Replica saw UPDATE\n[10:40:19] Replica saw DELETE\n[10:40:19] Replica write blocked as expected: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n[10:40:19] == Scenario: Failover (primary down) ==\n[10:40:20] Replica synced before failover\n[10:40:20] Note: Docker control test skipped (requires host access)\n[10:40:20] Manual test: docker stop postgres-primary, verify replica read-only, docker start postgres-primary\n[10:40:20] Replication resumed\n[10:40:20] == All scenarios passed ==\n",
      "stderr": "D:\\fastapi_project\\cluster_scenarios_test.py:64: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\cluster_scenarios_test.py:65: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\cluster_scenarios_test.py:76: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\cluster_scenarios_test.py:77: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "CRUD Operations Test",
      "file": "test_crud_operations.py",
      "status": "PASS",
      "duration": 0.9124355316162109,
      "return_code": 0,
      "stdout": "[2025-09-04 10:40:26] [INFO] üöÄ Starting PostgreSQL Cluster CRUD Tests\n[2025-09-04 10:40:26] [ERROR] ‚ùå Login error: ('Connection aborted.', ConnectionAbortedError(10053, 'An established connection was aborted by the software in your host machine', None, 10053, None))\n",
      "stderr": ""
    },
    {
      "suite_name": "Comprehensive Cluster Test",
      "file": "comprehensive_cluster_test.py",
      "status": "PASS",
      "duration": 40.68324661254883,
      "return_code": 0,
      "stdout": "üöÄ B·∫Øt ƒë·∫ßu Comprehensive PostgreSQL Cluster Testing\n============================================================\n‚úÖ [SETUP] PASS: Test environment setup completed\n\nÔøΩÔøΩ Running: Basic Replication\n----------------------------------------\n‚úÖ [CREATE_REPLICATION] PASS: Row 1 replicated in 0.08s\n‚úÖ [UPDATE_REPLICATION] PASS: Update replicated in 0.52s\n‚úÖ [DELETE_REPLICATION] PASS: Delete replicated in 0.01s\n\nÔøΩÔøΩ Running: Replica Read-Only\n----------------------------------------\n‚úÖ [REPLICA_INSERT_BLOCK] PASS: Replica correctly blocked INSERT: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute INSERT in a read-only transaction\n‚úÖ [REPLICA_UPDATE_BLOCK] PASS: Replica correctly blocked UPDATE: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute UPDATE in a read-only transaction\n‚úÖ [REPLICA_DELETE_BLOCK] PASS: Replica correctly blocked DELETE: (psycopg2.errors.ReadOnlySqlTransaction) cannot execute DELETE in a read-only transaction\n\nÔøΩÔøΩ Running: Primary Failover\n----------------------------------------\n‚úÖ [PRE_FAILOVER_SYNC] PASS: Data synced before failover: row 2\n‚úÖ [PRIMARY_STOP] PASS: Primary container stopped successfully\n‚úÖ [REPLICA_READ_DURING_FAILOVER] PASS: Replica still readable: 1 rows\n‚úÖ [POST_FAILOVER_SYNC] PASS: Replication resumed: row 3\n\nÔøΩÔøΩ Running: High Load Replication\n----------------------------------------\n‚úÖ [BATCH_INSERT] PASS: Inserted 100 records in 0.20s\n‚úÖ [BATCH_REPLICATION] PASS: All 100 records replicated in 1.05s\n\nÔøΩÔøΩ Running: Network Partition\n----------------------------------------\n‚ùå [NETWORK_PARTITION] FAIL: Network partition simulation failed: 404 Client Error for http+docker://localnpipe/v1.48/containers/postgres-replica/json: Not Found (\"No such container: postgres-replica\")\n\nÔøΩÔøΩ Running: Data Consistency\n----------------------------------------\n‚úÖ [DATA_CONSISTENCY] PASS: Data consistent: 10 records match\nÔøΩÔøΩ B√°o c√°o ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o: cluster_test_report.json\n\n============================================================\nüìä TEST SUMMARY\n============================================================\nTotal Tests: 15\nPassed: 14 ‚úÖ\nFailed: 1 ‚ùå\nSuccess Rate: 93.3%\nStart Time: 2025-09-04T10:40:33.785530\nEnd Time: 2025-09-04T10:41:12.009095\n\n‚ö†Ô∏è Some tests failed. Check the report for details.\n",
      "stderr": "D:\\fastapi_project\\comprehensive_cluster_test.py:438: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:439: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\comprehensive_cluster_test.py:472: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:473: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\nD:\\fastapi_project\\comprehensive_cluster_test.py:455: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=timeout)\nD:\\fastapi_project\\comprehensive_cluster_test.py:456: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Advanced Cluster Test",
      "file": "advanced_cluster_test.py",
      "status": "PASS",
      "duration": 76.87410306930542,
      "return_code": 0,
      "stdout": "üöÄ B·∫Øt ƒë·∫ßu Advanced PostgreSQL Cluster Testing\n============================================================\n‚úÖ [SETUP] PASS: Advanced test environment setup completed\n\nüîÑ Running: Connection Pooling Stress\n----------------------------------------\n‚úÖ [CONNECTION_POOLING_STRESS] PASS: Connection pooling stress test: 500/500 operations successful in 1.97s\n\nüîÑ Running: Replication Lag Monitoring\n----------------------------------------\n‚úÖ [REPLICATION_LAG_MONITORING] PASS: Replication lag monitoring: avg=0.033s, max=0.120s, min=0.006s\n\nüîÑ Running: Long Running Transaction\n----------------------------------------\n‚úÖ [LONG_RUNNING_TRANSACTION] PASS: Long running transaction completed and replicated in 10.04s\n\nüîÑ Running: Transaction Rollback\n----------------------------------------\n‚úÖ [TRANSACTION_ROLLBACK] PASS: Transaction rollback on primary worked correctly\n‚úÖ [TRANSACTION_ROLLBACK] PASS: Rollback correctly not replicated to replica\n\nüîÑ Running: Schema Changes Replication\n----------------------------------------\n‚úÖ [SCHEMA_CHANGES_REPLICATION] PASS: Schema changes and data replicated to replica\n\nüîÑ Running: Memory/CPU Stress\n----------------------------------------\n‚úÖ [MEMORY_CPU_STRESS] PASS: Stress test completed: 200/200 operations in 3.38s, Memory: +0.8%, CPU: +3.5%\n\nüîÑ Running: Replica Promotion Simulation\n----------------------------------------\n‚úÖ [REPLICA_PROMOTION_SIMULATION] PASS: Replica readable during promotion simulation: 712 rows\n‚úÖ [REPLICA_PROMOTION_SIMULATION] PASS: Replication resumed after promotion simulation\n\nüîÑ Running: Concurrent Read/Write\n----------------------------------------\n‚úÖ [CONCURRENT_READ_WRITE] PASS: Concurrent operations: 50/50 writes, 200/200 reads in 1.12s\nüìÑ B√°o c√°o ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o: advanced_cluster_test_report.json\n\n============================================================\nüìä ADVANCED TEST SUMMARY\n============================================================\nTotal Tests: 11\nPassed: 11 ‚úÖ\nFailed: 0 ‚ùå\nSuccess Rate: 100.0%\n\nüéâ Advanced tests completed successfully!\n",
      "stderr": "D:\\fastapi_project\\advanced_cluster_test.py:128: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  deadline = datetime.utcnow() + timedelta(seconds=10)\nD:\\fastapi_project\\advanced_cluster_test.py:130: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  while datetime.utcnow() < deadline:\n"
    },
    {
      "suite_name": "Network Performance Test",
      "file": "network_performance_test.py",
      "status": "PASS",
      "duration": 41.73401713371277,
      "return_code": 0,
      "stdout": "üöÄ B·∫Øt ƒë·∫ßu Network & Performance Testing\n============================================================\n‚úÖ [SETUP] PASS: Network performance test environment setup completed\n\nüîÑ Running: Network Latency Measurement\n----------------------------------------\n‚úÖ [NETWORK_LATENCY_MEASUREMENT] PASS: Network latency measured: Primary avg=0.005s, Replica avg=0.004s\n    üìä Metrics: {'primary_avg_latency': 0.004638552665710449, 'primary_max_latency': 0.00878143310546875, 'primary_min_latency': 0.0031991004943847656, 'replica_avg_latency': 0.003735077381134033, 'replica_max_latency': 0.01929926872253418, 'replica_min_latency': 0.002239704132080078, 'avg_difference': 0.002373707294464111}\n\nüîÑ Running: Network Partition Scenarios\n----------------------------------------\n‚ùå [NETWORK_PARTITION_SCENARIOS] FAIL: Network partition scenarios failed: 404 Client Error for http+docker://localnpipe/v1.48/containers/postgres-replica/json: Not Found (\"No such container: postgres-replica\")\n\nüîÑ Running: Bandwidth Utilization\n----------------------------------------\n‚úÖ [BANDWIDTH_UTILIZATION] PASS: Bandwidth utilization tested: Write avg=4506990.23 bytes/s, Read avg=18822691.99 bytes/s\n    üìä Metrics: {'payload_sizes': [1024, 10240, 102400, 1048576], 'avg_write_bandwidth': 4506990.2276106505, 'avg_read_bandwidth': 18822691.985329814, 'max_write_bandwidth': 15446755.306399554, 'max_read_bandwidth': 42046735.73460549}\n\nüîÑ Running: Connection Pool Exhaustion\n----------------------------------------\n‚ùå [CONNECTION_POOL_EXHAUSTION] FAIL: Connection pool exhaustion test failed: 0/100 connections successful\n    üìä Metrics: {'total_connections': 100, 'successful_connections': 0, 'success_rate': 0.0, 'duration': 0.012643814086914062}\n\nüîÑ Running: High Frequency Operations\n----------------------------------------\n‚úÖ [HIGH_FREQUENCY_OPERATIONS] PASS: High frequency operations: 1000/1000 operations at 76.9 ops/sec\n    üìä Metrics: {'total_cycles': 1000, 'successful_operations': 1000, 'success_rate': 1.0, 'operations_per_second': 76.94241202665457, 'duration': 12.99673318862915}\n\nüîÑ Running: Memory Usage Under Load\n----------------------------------------\n‚úÖ [MEMORY_USAGE_UNDER_LOAD] PASS: Memory usage under load: 250/250 operations, memory +0.3%\n    üìä Metrics: {'initial_memory_percent': 90.6, 'final_memory_percent': 90.9, 'memory_increase': 0.30000000000001137, 'successful_operations': 250, 'total_operations': 250, 'success_rate': 1.0, 'duration': 1.7504267692565918}\n\nüîÑ Running: Network Interruption Recovery\n----------------------------------------\n‚ùå [NETWORK_INTERRUPTION_RECOVERY] FAIL: Network interruption recovery test failed: 404 Client Error for http+docker://localnpipe/v1.48/containers/postgres-replica/json: Not Found (\"No such container: postgres-replica\")\nüìÑ B√°o c√°o ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o: network_performance_test_report.json\n\n============================================================\nüìä NETWORK & PERFORMANCE TEST SUMMARY\n============================================================\nTotal Tests: 8\nPassed: 5 ‚úÖ\nFailed: 3 ‚ùå\nSuccess Rate: 62.5%\n\n‚ö†Ô∏è Some network & performance tests failed. Check the report for details.\n",
      "stderr": ""
    }
  ]
}